<html>
	<head>
		<style>

		/* CSS goes here. */

		.country, .state {fill: #ddd; stroke:#fff;}
		.country.usa {fill: #ddc;}
		.country.algeria {fill: #ddc;}
		.state.texas {fill: #cdd;}
		</style>
	</head>
	<body>
		<div id='map'></div>
		<script src="http://d3js.org/d3.v3.min.js"></script>
		<script src="http://d3js.org/topojson.v1.min.js"></script>
		<script>
			
			var world; 

			var width = 960,
				height = 1160;

			var projection = d3.geo.azimuthalEqualArea()
			    .center([0, 0]) //this does not do what you think it would
			    .rotate([0, 0]) //nor does this
			    //.parallels([50, 60]) this doesn't seem to do anything
			    //.scale(100 * 5)//this zooms
			    .translate([width / 2, height / 2]);

			var path = d3.geo.path()
			    .projection(projection);

			var svg = d3.select("#map").append("svg")
			    .attr("width", width)
			    .attr("height", height);

			d3.json("data/world-us-topo.json", function(error, world) {
			  console.log(world)
			  svg.selectAll(".subunit")
			      .data(topojson.feature(world, world.objects.subunits).features)
			    .enter().append("path")
			      .attr("class", function(d) { return "country " + convertToSlug(d.properties.name); })
			      .attr("d", path);
			  svg.selectAll(".states")
			      .data(topojson.feature(world, world.objects['states-geo']).features)
			    .enter().append("path")
			      .attr("class", function(d) { return "state " + convertToSlug(d.properties.name); })
			      .attr("d", path);
			});

			function convertToSlug(Text)
				{
				    return Text
				        .toLowerCase()
				        .replace(/[^\w ]+/g,'')
				        .replace(/ +/g,'-')
				        ;
				}

		</script>
	</body>
</html>